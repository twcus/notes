<ModalDialog
    @onClose={{this.close}}
    @translucentOverlay=true
    @tetherTarget=".toolbar"
    @targetAttachment="top center"
    @targetOffset="200px 0"
    @attachment="top center"
>
    <div class="modal-body">
        {{#if @saveTask.last.error}}
            {{!-- TODO real error handling --}}
            {{@saveTask.last.error}}
        {{/if}}
        <Utils::TextEditor @content={{@note.content}} @onChange={{this.updatedNote}} />
        <div class="tag-list">
            {{#each @note.tags as |tag|}}
                <Tags::Tag @tag={{tag}} @isEditable={{false}} />
            {{/each}}
        </div>
    </div>
    <div class="modal-footer">
        <Utils::Timestamp
            @date={{@note.modifiedDate}}
            @format="MMM DD YYYY"
            @enableDiff=true
            @diffPrecision="days"
            @diffLimit=7
        />
        <div class="action-bar">
            <Select::DropdownSelect
                @isMultiSelect={{true}}
                @options={{@tags}}
                @selected={{@note.tags}}
                @onSelect={{this.selectTag}}
                @onCreate={{this.createTag}}
                @searchEnabled={{true}}
                @placeholder="Enter tag"
                @searchField="content"
                @stopPropagation=true
            >
                <FaIcon @icon="tag" />
            </Select::DropdownSelect>
            <button {{on "click" (stop-propagation this.delete)}} class="button"><FaIcon @icon="trash" /></button>
        </div>
    </div>
</ModalDialog>
